<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="staple.css">
    <link rel="icon" href="cuffee.png" type="image/x-icon">
    <link rel="stylesheet" href="dark-mode.css" id="dark-mode-stylesheet" disabled>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <title> Welcome</title>

</head>
<body>
    <section class="whole">
        <div class="container">
            <div class="menu">
                <a href="../index.html" class="menu-link">Home</a>
                <div class="toggle-icon" id="dark-mode-toggle"><i class="fa-solid fa-moon" ></i></div> 
                <a href="" class="menu-link">Menu</a>
                
              </div>

              <section class="two">
              
                <div class="actual-container">
                    <div class="progress-bar"></div>
    
                        <h1 class="title">Day 5 â€” Completing Task entity, Solved an obvious bug</h1>
                        
                        <div class="about">
                            <p>Olaoluwa Oke| 26 June 2023 </p>
                            </div>
                            <div class="data">
                                <p class="datap">
                                    When I sat down today, I just wanted to run the application and see where things stood. Instead, I was greeted with:
                                  <!---  <iframe width="560" height="315" 
                                    src="https://www.youtube.com/embed/bFEoMO0pc7k?si=U63kZPcJ7nKQJb6Z&amp;start=7" title="YouTube video player" 
                                    frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    allowfullscreen></iframe> --->


                                    <br> <br>
                                    
                                             <pre style="background-color: #f5f5f5; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 14px; color: #333; overflow-x: auto;">
"message": "Something went wrong: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='...........', source='admin', password=, mechanismProperties=}",  
"timestamp": "2025-06-24T20:47:29.095021900Z"
</pre>



                                    <br> <br>

                                  
                                    </p>
    
                               <div class="datap">

                             

            
                               
                       
I recognized it right away. Postman helped confirm it, but honestly, the real MVP was my Global Exception Handler from the previous day â€” it formatted the error so cleanly that I knew exactly what to check first. Debugging didnâ€™t feel like guesswork anymore.
<br> <br>
The culprit? My MongoDB connection string had vanished from my environment variables. After re-adding it, I still hit the same wall â€” because the password I was using was wrong. Seven minutes later, it clicked: I needed to update the credentials in MongoDB Atlas as well. Once I did that, the connection came back to life.
                                <br> <br>
                              My MongoDB connection string had somehow disappeared from my environment variables. I re-added it, but the password I used was wrong. It took about seven minutes to realize I needed to update the credentials in MongoDB Atlas as well. After doing that, everything connected.
                                <br> <br>
                               Later, I worked on the "mark task as complete" feature. At first, I made a request like this:
                               
                         <br> <br>
                         <pre style="background-color: #f5f5f5; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 14px; color: #333; overflow-x: auto;">
PATCH http://localhost:8080/api/task/room/user/68534f4f9c2ee8a8a041f5a5/status?isComplete="false"

</pre>

                                
                                <br> <br>
                                Wrong for two reasons:
                                <ol>
                                     <li style="font-family: 'Cardo', serif;">"false" was in quotes â€” I was sending a boolean as a string.</li>
                                              <li style="font-family: 'Cardo', serif;">The URL didnâ€™t match my endpoint mapping at all.</li>
                                </ol>

                                <br> <br>
                                My controller was:

                                                         <pre style="background-color: #f5f5f5; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 14px; color: #333; overflow-x: auto;">
@PatchMapping("/{taskId}/complete")
fun markTaskComplete(
    @PathVariable roomId: String,
    @PathVariable taskId: String,
    @RequestParam userId: String
)
</pre>

The base route was:

<br>

<pre style="background-color: #f5f5f5; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 14px; color: #333; overflow-x: auto;">
@RequestMapping("/api/room/{roomId}/task")
</pre>

<br>
So the correct request should have been:

<pre style="background-color: #f5f5f5; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 14px; color: #333; overflow-x: auto;">
PATCH http://localhost:8080/api/room/{roomId}/task/{taskId}/complete?userId={userId}
</pre>

<br>
Once I hit that correctly, it worked.

<hr>
<br>
<h4>Technical Log</h4>
<h5>1. MongoDB Credential Error Flow</h5>
     <li style="font-family: 'Cardo', serif;">Symptom: SCRAM-SHA-1 authentication error on startup.</li>
     <li style="font-family: 'Cardo', serif;">Cause: Missing environment variable + outdated Atlas password.</li>
     <li style="font-family: 'Cardo', serif;">Fix:</li>
        <ol>
            <li style="font-family: 'Cardo', serif;">Re-add MONGODB_URI in .env.</li>
            <li style="font-family: 'Cardo', serif;">Update database user credentials in MongoDB Atlas.</li>
            <li style="font-family: 'Cardo', serif;">Restart app to refresh connection.</li>
        </ol>
 <br> <br>
    <h5>3. Implemented Task Endpoints</h5>
     <li style="font-family: 'Cardo', serif;">createTask</li>
     <li style="font-family: 'Cardo', serif;">updateTask</li>
     <li style="font-family: 'Cardo', serif;">getTask</li>
     <li style="font-family: 'Cardo', serif;">getTasksByRoom</li>
     <li style="font-family: 'Cardo', serif;">getCompletedTasksByRoom</li>
     <li style="font-family: 'Cardo', serif;">getTasksByRoomAndStatus</li>
     <li style="font-family: 'Cardo', serif;">getUpcomingTasks</li>
     <li style="font-family: 'Cardo', serif;">markTaskAsComplete</li>
     <li style="font-family: 'Cardo', serif;">regenerateRecurringTasks</li>
     <li style="font-family: 'Cardo', serif;">getTasksByUsers</li>
     <li style="font-family: 'Cardo', serif;">getTasksByUsersAndStatus</li>

     <br> <br>
     
        <h5>4. Recurring Tasks â€” Pending Design</h5>
        <br>
        Current thought process:
        <li style="font-family: 'Cardo', serif;">store recurrence pattern in Task (DAILY, WEEKLY, etc.).</li>
        <li style="font-family: 'Cardo', serif;">Nightly cron job to clone tasks into upcoming intervals.</li>
         <li style="font-family: 'Cardo', serif;">Avoid duplication by checking if a recurrence-generated task already exists for that time window.</li>






                             
                                <!--I'm a big fan of reading articles shared by Yegor Bugayenko <a href="https://www.yegor256.com/" style="font-weight: bold; color: black; display: flex; flex-direction: row;">here</a>- that guy 
                                really knows his stuff! Another favorite of mine is delving into the world of Object-Oriented Programming (OOP)
                                 through the insights of Dr. Tom Butler <a href="https://r.je" style="font-weight: bold; color: black;">here</a> a professor from the University of Northampton.
                                 These reads add some serious depth to my understanding, and I always find myself coming back for more! ðŸ“–âœ¨-->



                                <br> <br>
            
    
                                <br> <br>
                                
                  
                               

                                
                                        
                                   
                                            
                                             
                            <hr>
                            
                </div>
    
                
                
            </div>
    
        </section>   
        
        <script>
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const darkModeStylesheet = document.getElementById('dark-mode-stylesheet');
        
            darkModeToggle.addEventListener('click', () => {
                const isDarkModeEnabled = darkModeStylesheet.disabled;
                darkModeStylesheet.disabled = !isDarkModeEnabled;
            });
        </script>

        <section class="footer">
            <div class="numpage">
                <p class="num">Page 1 of 1</p>
                <p>Â© Olaoluwa</p>
                <!---<hr class="ubad">---->
    
                
            </div>
            <a title="Google Analytics Alternative" href="https://clicky.com/101412980"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
            <script async data-id="101412980" src="//static.getclicky.com/js"></script>